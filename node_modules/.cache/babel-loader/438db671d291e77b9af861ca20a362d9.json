{"ast":null,"code":"var _jsxFileName = \"/home/generous/projects/t-store/src/components/context/products/ProductsState.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer, useEffect } from \"react\";\nimport axios from \"axios\";\nimport ProductsReducer from \"./ProductsReducer\";\nimport ProductsContext from \"./ProductsContext\";\nimport { ADD_PRODUCT, UPDATE_PRODUCT, DELETE_PRODUCT, GET_PRODUCTS, GET_PRODUCT, ADD_CATEGORY, UPDATE_CATEGORY, DELETE_CATEGORY, GET_CATEGORIES, GET_ELECTRONICS, GET_JEWELLERIES, GET_WOMENS_CLOTHING, GET_MENS_CLOTHING, SEARCH_PRODUCTS, GET_CATEGORY_PRODUCTS, GET_RELATED_PRODUCTS, ERRORS, CLEAR_MESSAGES } from \"../types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductsState = props => {\n  _s();\n\n  const initialState = {\n    products: null,\n    categoryProducts: null,\n    categories: null,\n    jewelleries: null,\n    mensClothing: null,\n    womensClothing: null,\n    electronics: null,\n    relatedProducts: null,\n    product: null,\n    searchedItems: null,\n    loading: true,\n    errors: null,\n    success: null\n  }; //initialise the state\n\n  const [state, dispatch] = useReducer(ProductsReducer, initialState); //configuration\n\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  };\n  useEffect(() => {\n    clearMessages(); // eslint-disable-next-line\n  }, []); //set the actions\n  //**add product to db */\n\n  const addProduct = async data => {\n    try {\n      await axios.post(\"http://localhost:8000/api/product\", data, config).then(res => {\n        dispatch({\n          type: ADD_PRODUCT,\n          payload: res.data\n        });\n      }).catch(err => {\n        var obj = err.response.data.errors ? err.response.data.errors : \"\";\n        dispatch({\n          type: ERRORS,\n\n          /* payload: obj[Object.keys(obj)[0]], */\n          payload: obj\n        });\n      });\n    } catch (error) {}\n  }; // add category\n\n\n  const addCategory = async data => {\n    try {\n      await axios.post(\"http://localhost:8000/api/category\", data, config).then(res => {\n        dispatch({\n          type: ADD_CATEGORY,\n          payload: res.data\n        });\n      }).catch(err => {\n        var obj = err.response.data.errors ? err.response.data.errors : \"\";\n        dispatch({\n          type: ERRORS,\n\n          /* payload: obj[Object.keys(obj)[0]], */\n          payload: obj\n        });\n      });\n    } catch (error) {}\n  }; //**add product to db */\n\n\n  const updateProduct = async (id, data) => {\n    try {\n      await axios.post(`http://localhost:8000/api/product/${id}`, data, config).then(res => {\n        dispatch({\n          type: UPDATE_PRODUCT,\n          payload: res.data\n        });\n      }).catch(err => {\n        var obj = err.response.data.errors ? err.response.data.errors : \"\";\n        dispatch({\n          type: ERRORS,\n          payload: obj[Object.keys(obj)[0]]\n        });\n      });\n    } catch (error) {}\n  }; //**delete product from db */\n\n\n  const deleteProduct = async id => {\n    try {\n      await axios.delete(`http://localhost:8000/api/product/${id}`, config).then(res => {\n        dispatch({\n          type: DELETE_PRODUCT\n        });\n      }).catch(err => {\n        var obj = err.response.data.errors ? err.response.data.errors : \"\";\n        dispatch({\n          type: ERRORS,\n          payload: obj[Object.keys(obj)[0]]\n        });\n      });\n    } catch (error) {}\n  }; //**delete category from db */\n\n\n  const deleteCategory = async id => {\n    try {\n      await axios.delete(`http://localhost:8000/api/category/${id}`, config).then(res => {\n        dispatch({\n          type: DELETE_CATEGORY,\n          payload: res.data\n        });\n      }).catch(err => {\n        var obj = err.response.data.errors ? err.response.data.errors : \"\";\n        dispatch({\n          type: ERRORS,\n          payload: obj[Object.keys(obj)[0]]\n        });\n      });\n    } catch (error) {}\n  }; // get products\n\n\n  const getProducts = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:8000/api/products\", config);\n      console.log(res);\n      dispatch({\n        type: GET_PRODUCTS,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; // get categories\n\n\n  const getCategories = async () => {\n    try {\n      await axios.get(\"http://localhost:8000/api/categories\", config).then(res => {\n        dispatch({\n          type: GET_CATEGORIES,\n          payload: res.data\n        });\n      }).error(err => {\n        console.log(err);\n      });\n    } catch (error) {}\n  }; //**get specific products products */\n  //get products based on categories\n\n\n  const getCategoryProducts = async category => {\n    try {\n      const res = await axios.get(`http://localhost:8000/api/products/category/${category}`);\n      dispatch({\n        type: GET_CATEGORY_PRODUCTS,\n        payload: res.data[0].products\n      });\n    } catch (error) {}\n  }; //get Jewelery\n\n\n  const getJewelleries = async () => {\n    try {\n      const res = await axios.get(`http://localhost:8000/api/category/products/1`);\n      dispatch({\n        type: GET_JEWELLERIES,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; //get Mens' Clothing\n\n\n  const getMensClothing = async () => {\n    try {\n      const res = await axios.get(\"https://fakestoreapi.com/products/category/men's clothing\");\n      dispatch({\n        type: GET_MENS_CLOTHING,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; //get Womens' Clothing\n\n\n  const getWomensClothing = async () => {\n    try {\n      const res = await axios.get(\"https://fakestoreapi.com/products/category/women's clothing\");\n      dispatch({\n        type: GET_WOMENS_CLOTHING,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; //get Electronics\n\n\n  const getElectronics = async () => {\n    try {\n      const res = await axios.get(\"https://fakestoreapi.com/products/category/electronics?limit=6\");\n      dispatch({\n        type: GET_ELECTRONICS,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; //get related products\n\n\n  const getRelatedProducts = async categoryId => {\n    try {\n      const res = await axios.get(`http://localhost:8000/api/related/products/${categoryId}`, config);\n      dispatch({\n        type: GET_RELATED_PRODUCTS,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; //**get a product */\n\n\n  const getProduct = async id => {\n    try {\n      const res = await axios.get(`http://localhost:8000/api/product/${id}`);\n      dispatch({\n        type: GET_PRODUCT,\n        payload: res.data\n      });\n    } catch (error) {}\n  }; // search product\n\n\n  const searchProducts = text => {\n    dispatch({\n      type: SEARCH_PRODUCTS,\n      payload: text\n    });\n  }; // set product to null\n\n\n  const setProductToNull = () => {\n    dispatch({\n      type: GET_PRODUCT,\n      payload: null\n    });\n  }; //Clear messages if any\n\n\n  const clearMessages = () => {\n    dispatch({\n      type: CLEAR_MESSAGES\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(ProductsContext.Provider, {\n    value: {\n      products: state.products,\n      jewelleries: state.jewelleries,\n      mensClothing: state.mensClothing,\n      womensClothing: state.womensClothing,\n      electronics: state.electronics,\n      relatedProducts: state.relatedProducts,\n      product: state.product,\n      searchedItems: state.searchedItems,\n      loading: state.loading,\n      error: state.error,\n      success: state.success,\n      categories: state.categories,\n      errors: state.errors,\n      addProduct,\n      updateProduct,\n      deleteProduct,\n      getProducts,\n      addCategory,\n\n      /* updateCategory,*/\n      deleteCategory,\n      getProducts,\n      getCategories,\n      getJewelleries,\n      getMensClothing,\n      getWomensClothing,\n      getElectronics,\n      getProduct,\n      searchProducts,\n      getCategoryProducts,\n      getRelatedProducts,\n      setProductToNull,\n      clearMessages\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductsState, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = ProductsState;\nexport default ProductsState;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsState\");","map":{"version":3,"sources":["/home/generous/projects/t-store/src/components/context/products/ProductsState.js"],"names":["useReducer","useEffect","axios","ProductsReducer","ProductsContext","ADD_PRODUCT","UPDATE_PRODUCT","DELETE_PRODUCT","GET_PRODUCTS","GET_PRODUCT","ADD_CATEGORY","UPDATE_CATEGORY","DELETE_CATEGORY","GET_CATEGORIES","GET_ELECTRONICS","GET_JEWELLERIES","GET_WOMENS_CLOTHING","GET_MENS_CLOTHING","SEARCH_PRODUCTS","GET_CATEGORY_PRODUCTS","GET_RELATED_PRODUCTS","ERRORS","CLEAR_MESSAGES","ProductsState","props","initialState","products","categoryProducts","categories","jewelleries","mensClothing","womensClothing","electronics","relatedProducts","product","searchedItems","loading","errors","success","state","dispatch","config","headers","Authorization","localStorage","getItem","clearMessages","addProduct","data","post","then","res","type","payload","catch","err","obj","response","error","addCategory","updateProduct","id","Object","keys","deleteProduct","delete","deleteCategory","getProducts","get","console","log","getCategories","getCategoryProducts","category","getJewelleries","getMensClothing","getWomensClothing","getElectronics","getRelatedProducts","categoryId","getProduct","searchProducts","text","setProductToNull","children"],"mappings":"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","sourcesContent":["import { useReducer, useEffect } from \"react\";\nimport axios from \"axios\";\nimport ProductsReducer from \"./ProductsReducer\";\nimport ProductsContext from \"./ProductsContext\";\n\nimport {\n  ADD_PRODUCT,\n  UPDATE_PRODUCT,\n  DELETE_PRODUCT,\n  GET_PRODUCTS,\n  GET_PRODUCT,\n  ADD_CATEGORY,\n  UPDATE_CATEGORY,\n  DELETE_CATEGORY,\n  GET_CATEGORIES,\n  GET_ELECTRONICS,\n  GET_JEWELLERIES,\n  GET_WOMENS_CLOTHING,\n  GET_MENS_CLOTHING,\n  SEARCH_PRODUCTS,\n  GET_CATEGORY_PRODUCTS,\n  GET_RELATED_PRODUCTS,\n  ERRORS,\n  CLEAR_MESSAGES,\n} from \"../types\";\n\nconst ProductsState = (props) => {\n  const initialState = {\n    products: null,\n    categoryProducts: null,\n    categories: null,\n    jewelleries: null,\n    mensClothing: null,\n    womensClothing: null,\n    electronics: null,\n    relatedProducts: null,\n    product: null,\n    searchedItems: null,\n    loading: true,\n    errors: null,\n    success: null,\n  };\n\n  //initialise the state\n  const [state, dispatch] = useReducer(ProductsReducer, initialState);\n\n  //configuration\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  };\n\n  useEffect(() => {\n    clearMessages()\n    \n    // eslint-disable-next-line\n  }, [])\n\n  //set the actions\n  //**add product to db */\n  const addProduct = async (data) => {\n    \n    try {\n      await axios\n        .post(\"http://localhost:8000/api/product\", data, config)\n        .then((res) => {\n          dispatch({\n            type: ADD_PRODUCT,\n            payload: res.data,\n          });\n        })\n        .catch((err) => {\n          var obj = err.response.data.errors ? err.response.data.errors : \"\";\n          dispatch({\n            type: ERRORS,\n            /* payload: obj[Object.keys(obj)[0]], */\n            payload: obj,\n          });\n        });\n    } catch (error) {}\n  };\n\n  // add category\n  const addCategory = async (data) => {\n    try {\n      await axios\n        .post(\"http://localhost:8000/api/category\", data, config)\n        .then((res) => {\n          dispatch({\n            type: ADD_CATEGORY,\n            payload: res.data,\n          });\n        })\n        .catch((err) => {\n          var obj = err.response.data.errors ? err.response.data.errors : \"\";\n          dispatch({\n            type: ERRORS,\n            /* payload: obj[Object.keys(obj)[0]], */\n            payload: obj,\n          });\n        });\n    } catch (error) {}\n  };\n\n  //**add product to db */\n  const updateProduct = async (id, data) => {\n    try {\n      await axios\n        .post(`http://localhost:8000/api/product/${id}`, data, config)\n        .then((res) => {\n          dispatch({\n            type: UPDATE_PRODUCT,\n            payload: res.data,\n          });\n        })\n        .catch((err) => {\n          var obj = err.response.data.errors ? err.response.data.errors : \"\";\n          dispatch({\n            type: ERRORS,\n            payload: obj[Object.keys(obj)[0]],\n          });\n        });\n    } catch (error) {}\n  };\n\n  //**delete product from db */\n  const deleteProduct = async (id) => {\n    try {\n      await axios\n        .delete(`http://localhost:8000/api/product/${id}`, config)\n        .then((res) => {\n          dispatch({\n            type: DELETE_PRODUCT,\n          });\n        })\n        .catch((err) => {\n          var obj = err.response.data.errors ? err.response.data.errors : \"\";\n          dispatch({\n            type: ERRORS,\n            payload: obj[Object.keys(obj)[0]],\n          });\n        });\n    } catch (error) {}\n  };\n\n\n  //**delete category from db */\n  const deleteCategory = async (id) => {\n    try {\n      await axios\n        .delete(`http://localhost:8000/api/category/${id}`, config)\n        .then((res) => {\n          dispatch({\n            type: DELETE_CATEGORY,\n            payload: res.data\n          });\n        })\n        .catch((err) => {\n          var obj = err.response.data.errors ? err.response.data.errors : \"\";\n          dispatch({\n            type: ERRORS,\n            payload: obj[Object.keys(obj)[0]],\n          });\n        });\n    } catch (error) {}\n  };\n\n  // get products\n  const getProducts = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:8000/api/products\", config);\n      console.log(res);\n      dispatch({\n        type: GET_PRODUCTS,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  // get categories\n  const getCategories = async () => {\n    try {\n      await axios\n        .get(\"http://localhost:8000/api/categories\", config)\n        .then((res) => {\n          dispatch({\n            type: GET_CATEGORIES,\n            payload: res.data,\n          });\n        })\n        .error((err) => {\n          console.log(err);\n        });\n    } catch (error) {}\n  };\n\n  //**get specific products products */\n  //get products based on categories\n  const getCategoryProducts = async (category) => {\n    try {\n      const res = await axios.get(\n        `http://localhost:8000/api/products/category/${category}`\n      );\n      dispatch({\n        type: GET_CATEGORY_PRODUCTS,\n        payload: res.data[0].products,\n      });\n    } catch (error) {}\n  };\n  //get Jewelery\n  const getJewelleries = async () => {\n    try {\n      const res = await axios.get(\n        `http://localhost:8000/api/category/products/1`\n      );\n      dispatch({\n        type: GET_JEWELLERIES,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  //get Mens' Clothing\n  const getMensClothing = async () => {\n    try {\n      const res = await axios.get(\n        \"https://fakestoreapi.com/products/category/men's clothing\"\n      );\n      dispatch({\n        type: GET_MENS_CLOTHING,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  //get Womens' Clothing\n  const getWomensClothing = async () => {\n    try {\n      const res = await axios.get(\n        \"https://fakestoreapi.com/products/category/women's clothing\"\n      );\n      dispatch({\n        type: GET_WOMENS_CLOTHING,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  //get Electronics\n  const getElectronics = async () => {\n    try {\n      const res = await axios.get(\n        \"https://fakestoreapi.com/products/category/electronics?limit=6\"\n      );\n      dispatch({\n        type: GET_ELECTRONICS,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  //get related products\n  const getRelatedProducts = async (categoryId) => {\n    try {\n      const res = await axios.get(\n        `http://localhost:8000/api/related/products/${categoryId}`,\n        config\n      );\n\n      dispatch({\n        type: GET_RELATED_PRODUCTS,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  //**get a product */\n  const getProduct = async (id) => {\n    try {\n      const res = await axios.get(`http://localhost:8000/api/product/${id}`);\n      dispatch({\n        type: GET_PRODUCT,\n        payload: res.data,\n      });\n    } catch (error) {}\n  };\n\n  // search product\n  const searchProducts = (text) => {\n    dispatch({\n      type: SEARCH_PRODUCTS,\n      payload: text,\n    });\n  };\n\n  // set product to null\n  const setProductToNull = () => {\n    dispatch({\n      type: GET_PRODUCT,\n      payload: null,\n    });\n  };\n\n  //Clear messages if any\n  const clearMessages = () => {\n    dispatch({\n      type: CLEAR_MESSAGES,\n    });\n  };\n\n\n  \n  return (\n    <ProductsContext.Provider\n      value={{\n        products: state.products,\n        jewelleries: state.jewelleries,\n        mensClothing: state.mensClothing,\n        womensClothing: state.womensClothing,\n        electronics: state.electronics,\n        relatedProducts: state.relatedProducts,\n        product: state.product,\n        searchedItems: state.searchedItems,\n        loading: state.loading,\n        error: state.error,\n        success: state.success,\n        categories: state.categories,\n        errors: state.errors,\n        addProduct,\n        updateProduct,\n        deleteProduct,\n        getProducts,\n        addCategory,\n        /* updateCategory,*/\n        deleteCategory,\n        getProducts,\n        getCategories,\n        getJewelleries,\n        getMensClothing,\n        getWomensClothing,\n        getElectronics,\n        getProduct,\n        searchProducts,\n        getCategoryProducts,\n        getRelatedProducts,\n        setProductToNull,\n        clearMessages,\n      }}\n    >\n      {props.children}\n    </ProductsContext.Provider>\n  );\n};\n\nexport default ProductsState;\n"]},"metadata":{},"sourceType":"module"}