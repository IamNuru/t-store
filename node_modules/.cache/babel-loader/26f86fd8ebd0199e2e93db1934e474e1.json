{"ast":null,"code":"var _jsxFileName = \"/home/generous/projects/t-store/src/components/dashboard/products/AddProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ProductsContext from \"../../context/products/ProductsContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddProduct = () => {\n  _s();\n\n  const {\n    product,\n    errors,\n    addProduct,\n    updateProduct,\n    categories,\n    success,\n    getCategories,\n    setProductToNull,\n    clearMessages\n  } = useContext(ProductsContext);\n  const history = useHistory(); //set data state\n\n  const [data, setData] = useState({\n    title: \"\",\n    price: \"\",\n    deductions: \"\",\n    description: \"\",\n    qty: \"\"\n  });\n  const [category, setCategory] = useState('');\n  const [image_name, setImageName] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n\n  const newRecord = () => {\n    setUpdate(false);\n    setProductToNull();\n    setData({\n      title: \"\",\n      price: \"\",\n      deductions: \"\",\n      description: \"\",\n      qty: \"\"\n    });\n  }; //destructure data state\n\n\n  const {\n    title,\n    price,\n    deductions,\n    description,\n    qty\n  } = data; //component\n\n  useEffect(() => {\n    getCategories();\n    clearMessages(); // eslint-disable-next-line\n  }, []); //on input change\n\n  const onChange = e => {\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n  }; //When category is selected\n\n\n  const onCategorySelect = e => {\n    setCategory(e.target.value);\n  }; //on File change\n\n\n  const onFileChange = e => {\n    setImageName(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (product) {\n      setData({\n        title: product.title,\n        price: product.price,\n        deductions: product.deduction,\n        description: product.description,\n        qty: product.qty,\n        image_name: product.image_name\n      });\n      setCategory(product.category_id);\n      setUpdate(true);\n    } // eslint-disable-next-line\n\n  }, [product]); //clear inputs when you get success message\n\n  useEffect(() => {\n    setTimeout(() => {\n      clearMessages();\n    }, 5000);\n    setTimeout(() => {\n      setData({\n        title: \"\",\n        price: \"\",\n        deductions: \"\",\n        description: \"\",\n        qty: \"\"\n      });\n    }, 1000); // eslint-disable-next-line\n  }, [success]); // on submit\n\n  const onSubmit = e => {\n    e.preventDefault();\n    var formData = new FormData();\n\n    if (category === '') {\n      alert('please select a category');\n      return false;\n    }\n\n    clearMessages();\n\n    if (update) {\n      formData.append(\"title\", title);\n      formData.append(\"price\", price);\n      formData.append(\"qty\", qty);\n      formData.append(\"deductions\", deductions);\n      formData.append(\"image_name\", image_name);\n      formData.append(\"category\", category);\n      formData.append(\"description\", description);\n      updateProduct(product.id, formData);\n      history.push(\"/dashboard/products\");\n    } else {\n      formData.append(\"title\", title);\n      formData.append(\"price\", price);\n      formData.append(\"qty\", qty);\n      formData.append(\"deductions\", deductions);\n      formData.append(\"image_name\", image_name);\n      formData.append(\"category\", category);\n      formData.append(\"description\", description);\n      addProduct(formData);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    className: \"block  md:px-4 px-8 pb:8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full grid grid-cols-1 grid md:grid-cols-2 lg:grid-cols-3 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"Title\",\n          className: \"text-md text-gray-800 py-1\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          onChange: onChange,\n          value: title,\n          required: true,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.title) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.title) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800 py-1\",\n          children: \"Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"price\",\n          onChange: onChange,\n          value: price,\n          required: true,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.price) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.price) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800\",\n          children: \"Deductions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"deductions\",\n          onChange: onChange,\n          value: deductions,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.deductions) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.deductions) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.deductions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          name: \"description\",\n          onChange: onChange,\n          value: description,\n          required: true,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.description) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.description) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800\",\n          children: \"Qty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"qty\",\n          onChange: onChange,\n          value: qty,\n          required: true,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.qty) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.qty) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.qty\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800\",\n          children: \"Select Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: category,\n          className: \"border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300\",\n          onChange: onCategorySelect,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 11\n          }, this), (categories === null || categories === void 0 ? void 0 : categories.length) > 0 ? categories.map((cat, index) => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: cat.id,\n              index: index,\n              children: cat.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 19\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"None\",\n            children: \"No category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-md text-gray-800\",\n          children: \"Choose Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"image_name\",\n          onChange: onFileChange,\n          required: true,\n          className: `${(errors === null || errors === void 0 ? void 0 : errors.title) && \"border-red-600 \"} border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), (errors === null || errors === void 0 ? void 0 : errors.image_name) && /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm italic text-red-600 py-1\",\n          children: errors.image_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-4 text-blue-800 text-md italic text-center\",\n      children: success.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn flex float-right\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"mx-2 mb-8 py-1 mt-2 px-4 border-1 bg-purple-600 text-white font-semibold text-xl text-center outline-none capitalize\",\n        children: update ? \"Update\" : \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), update && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => newRecord(),\n        className: \"cursor-pointer mb-8 py-1 mt-2 px-4 border-1 bg-pink-600 text-white text-md text-center outline-none capitalize\",\n        children: update && \"New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddProduct, \"i+ifBi5G5PqjLX706ajq6MvWT8k=\", false, function () {\n  return [useHistory];\n});\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["/home/generous/projects/t-store/src/components/dashboard/products/AddProduct.js"],"names":["React","useContext","useState","useEffect","useHistory","ProductsContext","AddProduct","product","errors","addProduct","updateProduct","categories","success","getCategories","setProductToNull","clearMessages","history","data","setData","title","price","deductions","description","qty","category","setCategory","image_name","setImageName","update","setUpdate","newRecord","onChange","e","target","name","value","onCategorySelect","onFileChange","files","deduction","category_id","setTimeout","onSubmit","preventDefault","formData","FormData","alert","append","id","push","length","map","cat","index","message"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ProductsContext from \"../../context/products/ProductsContext\";\n\nconst AddProduct = () => {\n  const {\n    product,\n    errors,\n    addProduct,\n    updateProduct,\n    categories,\n    success,\n    getCategories,\n    setProductToNull,\n    clearMessages,\n  } = useContext(ProductsContext);\n\n  const history  = useHistory()\n  //set data state\n  const [data, setData] = useState({\n    title: \"\",\n    price: \"\",\n    deductions: \"\",\n    description: \"\",\n    qty: \"\",\n  });\n\n  const [category, setCategory] = useState('')\n  const [image_name, setImageName] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n\n  const newRecord = () => {\n    setUpdate(false);\n    setProductToNull();\n    setData({\n      title: \"\",\n      price: \"\",\n      deductions: \"\",\n      description: \"\",\n      qty: \"\",\n    });\n  };\n\n  //destructure data state\n  const { title, price, deductions, description, qty } = data;\n\n  //component\n  useEffect(() => {\n    getCategories();\n    clearMessages();\n\n    // eslint-disable-next-line\n  }, []);\n\n  //on input change\n  const onChange = (e) => {\n    setData({ ...data, [e.target.name]: e.target.value });\n  };\n\n  //When category is selected\n  const onCategorySelect = (e) =>{\n    setCategory(e.target.value)\n  }\n\n  //on File change\n  const onFileChange = (e) => {\n    setImageName(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (product) {\n      setData({\n        title: product.title,\n        price: product.price,\n        deductions: product.deduction,\n        description: product.description,\n        qty: product.qty,\n        image_name: product.image_name,\n      });\n      setCategory(product.category_id)\n      setUpdate(true);\n    }\n\n    // eslint-disable-next-line\n  }, [product]);\n\n\n  //clear inputs when you get success message\n  useEffect(() => {\n    setTimeout(() => {\n      clearMessages()\n    }, 5000);\n    setTimeout(() => {\n      setData({\n        title: \"\",\n        price: \"\",\n        deductions: \"\",\n        description: \"\",\n        qty: \"\",\n      });\n    }, 1000);\n    // eslint-disable-next-line\n  }, [success])\n\n\n  // on submit\n  const onSubmit = (e) => {\n    e.preventDefault();\n    var formData = new FormData();\n    if (category === '') {\n      alert('please select a category')\n      return false;\n    }\n    clearMessages()\n    if (update) {\n      formData.append(\"title\", title);\n      formData.append(\"price\", price);\n      formData.append(\"qty\", qty);\n      formData.append(\"deductions\", deductions);\n      formData.append(\"image_name\", image_name);\n      formData.append(\"category\", category);\n      formData.append(\"description\", description);\n      updateProduct(product.id, formData);\n      history.push(\"/dashboard/products\");\n    } else {\n      formData.append(\"title\", title);\n      formData.append(\"price\", price);\n      formData.append(\"qty\", qty);\n      formData.append(\"deductions\", deductions);\n      formData.append(\"image_name\", image_name);\n      formData.append(\"category\", category);\n      formData.append(\"description\", description);\n      addProduct(formData);\n      \n    }\n  };\n\n  return (\n    <form\n      onSubmit={onSubmit}\n      encType=\"multipart/form-data\"\n      className=\"block  md:px-4 px-8 pb:8\"\n    >\n      <div className=\"w-full grid grid-cols-1 grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        <div className=\"block\">\n          <label htmlFor=\"Title\" className=\"text-md text-gray-800 py-1\">\n            Title\n          </label>\n          <input\n            type=\"text\"\n            name=\"title\"\n            onChange={onChange}\n            value={title}\n            required\n            className={`${\n              errors?.title && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          />\n          {errors?.title && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.title}\n            </label>\n          )}\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800 py-1\">Price</label>\n          <input\n            type=\"text\"\n            name=\"price\"\n            onChange={onChange}\n            value={price}\n            required\n            className={`${\n              errors?.price && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          />\n          {errors?.price && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.price}\n            </label>\n          )}\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800\">Deductions</label>\n          <input\n            type=\"text\"\n            name=\"deductions\"\n            onChange={onChange}\n            value={deductions}\n            className={`${\n              errors?.deductions && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          />\n          {errors?.deductions && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.deductions}\n            </label>\n          )}\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800\">Description</label>\n          <textarea\n            type=\"text\"\n            name=\"description\"\n            onChange={onChange}\n            value={description}\n            required\n            className={`${\n              errors?.description && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          ></textarea>\n          {errors?.description && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.description}\n            </label>\n          )}\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800\">Qty</label>\n          <input\n            type=\"number\"\n            name=\"qty\"\n            onChange={onChange}\n            value={qty}\n            required\n            className={`${\n              errors?.qty && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          />\n          {errors?.qty && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.qty}\n            </label>\n          )}\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800\">Select Category</label>\n          <select\n            value={category}\n            className=\"border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300\"\n            onChange={onCategorySelect}\n          >\n          <option value=\"\">\n            Select category\n          </option>\n            {categories?.length > 0 ? (\n              categories.map((cat, index) => {\n                return (\n                  <option value={cat.id} key={index} index={index}>\n                    {cat.name}\n                  </option>\n                );\n              })\n            ) : (\n              <option value=\"None\">No category</option>\n            )}\n          </select>\n        </div>\n        <div className=\"block\">\n          <label className=\"text-md text-gray-800\">Choose Image</label>\n          <input\n            type=\"file\"\n            name=\"image_name\"\n            onChange={onFileChange}\n            required\n            className={`${\n              errors?.title && \"border-red-600 \"\n            } border border-gray-400 w-full py-1 px-1 outline-none focus:border-purple-300`}\n          />\n          {errors?.image_name && (\n            <label className=\"text-sm italic text-red-600 py-1\">\n              {errors.image_name}\n            </label>\n          )}\n        </div>\n      </div>\n      {success && (\n        <div className=\"py-4 text-blue-800 text-md italic text-center\">\n          {success.message}\n        </div>\n      )}\n      <div className=\"btn flex float-right\">\n        <button\n          type=\"submit\"\n          className=\"mx-2 mb-8 py-1 mt-2 px-4 border-1 bg-purple-600\n           text-white font-semibold text-xl text-center outline-none capitalize\"\n        >\n          {update ? \"Update\" : \"Save\"}\n        </button>\n        {update && (\n          <div\n            onClick={() => newRecord()}\n            className=\"cursor-pointer mb-8 py-1 mt-2 px-4 border-1 bg-pink-600\n           text-white text-md text-center outline-none capitalize\"\n          >\n            {update && \"New\"}\n          </div>\n        )}\n      </div>\n    </form>\n  );\n};\n\nexport default AddProduct;\n"]},"metadata":{},"sourceType":"module"}